SURF STL ../../OpenSCAD/config2/mesh_geom.stl

RUN_DIAGNOSTICS WITH_DETAILS WITH_SUBZONE_INFO
CHECK_SELF_INTERSECTIONS

RENAME_ZONE mesh_geom.stl buildings

SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT 1000 500 100
SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT -1000 500 100
SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT 100 1000 100
SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT 100 -1000 100
SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT 100 500 1000
SPLIT_FLAG ZONE_INDICES 0 MARCH_FROM_POINT 100 500 -1000

MOVE_TO_ZONE NAME right SUBZONES 6
MOVE_TO_ZONE NAME left SUBZONES 5
MOVE_TO_ZONE NAME ground SUBZONES 4
MOVE_TO_ZONE NAME top SUBZONES 3
MOVE_TO_ZONE NAME inlet SUBZONES 2
MOVE_TO_ZONE NAME outlet SUBZONES 1

SPLIT_FLAG ZONE_INDICES 0 BY_DISJOINT
MOVE_TO_ZONE NAME interior SUBZONES 139,123,122,121,120,119,104,88,87,86,85,84,69,53,52,51,50,49,34,18,17,16,15,14

SET_ZONE_BC ZONE_NAMES inlet BC PER1_A
SET_ZONE_BC ZONE_NAMES outlet BC PER1_B
SET_PERIODIC ZONES inlet outlet CART 232 0 0

SET_ZONE_BC ZONE_NAMES right BC PER2_A
SET_ZONE_BC ZONE_NAMES left BC PER2_B
SET_PERIODIC ZONES right left CART 0 0 232

WRITE_SBIN mesh_geom.sbin

INTERACTIVE
